#!/bin/bash

# The desired directory structure
DIR="/a/b/c/d"

# The permission we want to set
PERMISSIONS=775

# Create the directory structure with the correct permissions
IFS='/' # Internal Field Separator set to '/'
read -ra ADDR <<< "$DIR" # Read the directory structure into an array as tokens separated by IFS
path=""
for dir in "${ADDR[@]}"; do
    path+="/$dir" # Construct each level of the path
    if [ ! -d "$path" ]; then # Check if the directory does not exist
        mkdir -m $PERMISSIONS "$path" # Create the directory with the specified permissions
    else
        chmod $PERMISSIONS "$path" # If the directory exists, just change the permissions
    fi
done
